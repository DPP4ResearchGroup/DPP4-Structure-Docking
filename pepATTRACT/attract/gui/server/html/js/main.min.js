$(document).ready(function(){var e=false;var t={};var n=["block-partners-"];submitForm=function(){$("form").submit()};trackBlockChange=function(){for(var e in t){if(t[e]==0){$("#nav-"+e).parent().removeClass("changed")}else{$("#nav-"+e).parent().addClass("changed")}}};pageIntoView=function(e){var t=e.attr("id");var n=$("#"+t.split("-")[1]);n.show();$("div[id^=page]").each(function(){if($(this)[0]!==n[0]){$(this).hide()}});e.addClass("active");$("li[id^=view]").each(function(){if($(this)[0]!==e[0]&&$(this).hasClass("active")){$(this).removeClass("active")}})};foldAllOthers=function(e){var t=e.attr("id");var n=t.split("-").slice(0,2).join("-");$("div[id^="+n+"]").each(function(){if($(this)[0]!==e[0]&&$(this).hasClass("active")&&!$(this).hasClass("multi-active")){$(this).find(".level1-container").slideToggle();$(this).removeClass("active")}})};resetLevelTwo=function(e){e.find(".level2").each(function(){var e=$(this).find(".switch > input");if(e.length){if(e.prop("checked")){$(this).find(".group-container").show()}else{$(this).find(".group-container").hide()}}})};reloadFormBlock=function(e){e.find(":input").each(function(){if($(this).is(":checkbox")||$(this).is(":radio")){$(this).prop("checked",$(this).data("default"))}else{$(this).val($(this).data("default"))}$(this).parent().removeClass("active")});resetLevelTwo(e)};getCloneBlocks=function(e){var t=new RegExp("^"+e+"[0-9]+$");return $("div[id^="+e+"]").filter(function(e){return this.id.match(t)})};renumberFormBlocks=function(e){e=e.substring(1)+"-";var t=0;getCloneBlocks(e).each(function(){var n=$(this).attr("id");var r=parseInt(n.substring(n.length-1));$(this).attr("id",e+t);$(this).find("[id]").each(function(){var e=$(this);var n=e.attr("id").replace(r,t);e.attr("id",n)});$(this).find("[name]").each(function(){var e=$(this);var n=e.attr("name").replace(r,t);e.attr("name",n)});var i=$(this).find(".controls .title > h4");i.text(i.text().replace(r+1,t+1));t+=1})};cloneBlock=function(e,t){count=getCloneBlocks(e).length;if(count+1<=t){var n=$("#"+e+"0");var r=$(n).clone(true);r.attr("id",r.attr("id").replace("0",count));r.find("[id]").each(function(){var e=$(this);var t=e.attr("id").replace("0",count);e.attr("id",t)});r.find("[name]").each(function(){var e=$(this);var t=e.attr("name").replace("0",count);e.attr("name",t)});r.find("em").remove();var i=r.find("#remove-"+e+count);if(i){i.show()}var s=r.find(".controls .title > h4");s.text(s.text().replace("1",count+1));reloadFormBlock(r);r.insertAfter(getCloneBlocks(e).filter(":last"));foldAllOthers(r);r.find(".level1-container").slideToggle();r.addClass("active")}if(count+1==t){$("#"+e+"add").parent().addClass("disabled")}};$.confirm=function(e){if($("#confirmOverlay").length){return false}var t="";$.each(e.buttons,function(e,n){t+='<a href="#" class="button '+n["class"]+'">'+e+"</a>";if(!n.action){n.action=function(){}}});var n=['<div id="confirmOverlay">','<div id="confirmBox">',"<h1>",e.title,"</h1>","<p>",e.message,"</p>",'<div id="confirmButtons">',t,"</div></div></div>"].join("");$(n).hide().appendTo("body").fadeIn();var r=$("#confirmBox .button"),i=0;$.each(e.buttons,function(e,t){r.eq(i++).click(function(){t.action();$.confirm.hide();return false})})};$.confirm.hide=function(){$("#confirmOverlay").fadeOut(function(){$(this).remove()})};$("#close-app").click(function(){$.confirm({title:"Close Application?",message:e?"You did not download any configuration yet. <br /> All data will be lost!                                  Close ATTRACT Online?":"All data will be lost! Close ATTRACT Online?",buttons:{Yes:{"class":"blue",action:function(){self.close()}},No:{"class":"gray"}}})});$("#show-hide-sidepanel").click(function(){$(this).toggleClass("button-active");var e=$("#content");var t=$(this).find(".header-tooltip p");if(e.position().left==0){e.animate({left:185});t.text("Hide sidepanel")}else{e.animate({left:0});t.text("Show sidepanel")}});$("#unfold-all").click(function(){$("li[id^=view-]").each(function(){if($(this).hasClass("active")){var e=$("#"+$(this).attr("id").split("-")[1]);e.find("div[id^=block-]").each(function(){if(!$(this).hasClass("active")){$(this).addClass("active");var e=$(this).find(".level1-container");$(e).slideToggle()}})}})});$("li[id^=view-]").click(function(){pageIntoView($(this))});$(".controls > .title").click(function(){var e=$(this).closest("div[id^=block-]");var t=$(e).find(".level1-container");if(!$(e).hasClass("always-active")){$(t).slideToggle();if($(e).hasClass("active")){$(e).removeClass("active")}else{$(e).addClass("active")}foldAllOthers(e)}});$(".switch > input").change(function(){var e=$(this).closest(".level2");e.find(".group-container").slideToggle()});$(":input").change(function(){var e=$(this).closest("div[id^=block-]").attr("id");if(e){var e=e.split("-").slice(0,2).join("-")}var n=false;if($(this).is(":checkbox")||$(this).is(":radio")){if($(this).prop("checked")!==$(this).data("default")){var n=true}}else{if($(this).val()!==$(this).data("default")){var n=true}}if(n){if(e in t){t[e]+=1}}else{if(e in t){t[e]-=1}}$(this).parent().toggleClass("active");trackBlockChange()});$("div[id^=remove-block-]").click(function(){var e="#"+$(this).attr("id").replace(/^remove-/g,"");var t=e.split("-").slice(0,-1).join("-");$.confirm({title:"Delete Confirmation",message:"You are about to delete this item. <br />It cannot be restored at a later time! Continue?",buttons:{Yes:{"class":"blue",action:function(){$(e).remove();renumberFormBlocks(t);$(t+"-add").parent().removeClass("disabled")}},No:{"class":"gray"}}})});$("#reload-form").click(function(){$.confirm({title:"Reload Form?",message:"Are you sure you want to reset all settings back to there default values? this cannot be restored.",buttons:{Yes:{"class":"blue",action:function(){reloadFormBlock($("form"));$("div[id^=block-]").each(function(){var e=$(this).attr("id");t[e.split("-").slice(0,2).join("-")]=0});trackBlockChange()}},No:{"class":"gray"}}})});$(".reload-form-block").click(function(){var e=$(this);$.confirm({title:"Reload this part of the form?",message:"Are you sure you want to reset this part of the form to its default values? this cannot be restored.",buttons:{Yes:{"class":"blue",action:function(){var n=e.closest("div[id^=block-]");reloadFormBlock(n);t[n.attr("id").split("-").slice(0,2).join("-")]=0;trackBlockChange()}},No:{"class":"gray"}}})});$(":input").each(function(){if($(this).is(":checkbox")||$(this).is(":radio")){$(this).data("default",$(this).prop("checked"))}else{$(this).data("default",$(this).val())}});$(":input").each(function(){if($(this).is(":checkbox")||$(this).is(":radio")){if($(this).prop("checked")){$(this).closest(".field-container").addClass("checked")}}});resetLevelTwo($("form"));for(var r in n){if($("div[id^="+n[r]+"]").length==1){cloneBlock(n[r],10)}}pageIntoView($("#view-page1"));$("div[id^=block-]").each(function(){var e=$(this).attr("id");t[e.split("-").slice(0,2).join("-")]=0})})